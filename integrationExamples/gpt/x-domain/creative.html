// this script can be returned by an ad server delivering a cross domain iframe, into which the
// creative will be rendered, e.g. GAM delivering a SafeFrame

// this code is autogenerated, also available in 'build/creative/creative.js'
<script>!function(){"use strict";var e=JSON.parse('{"FP":{"h0":"adRenderFailed","gV":"adRenderSucceeded"},"q_":{"Ex":"noAd","XW":"exception"}}');const t=e.FP.gV,n=e.FP.h0,s=e.q_.Ex,r=e.q_.XW,a={frameBorder:0,scrolling:"no",marginHeight:0,marginWidth:0,topMargin:0,leftMargin:0,allowTransparency:"true"};function i(e,t){const n=e.createElement("iframe");return t=Object.assign({},t,a),Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),e.body.appendChild(n),n}window.renderAd=function(e=window){return function({adId:a,pubUrl:o,clickUrl:d}){const c=(()=>{const t=e.document.createElement("a");return t.href=o,t.protocol+"//"+t.host})();function g(s){const r={message:"Prebid Event",adId:a,event:null==s?t:n};null!=s&&(r.info=s),e.parent.postMessage(JSON.stringify(r),c)}function l(t){let n={};try{n=JSON.parse(t[t.message?"message":"data"])}catch(e){return}if("Prebid Response"===n.message&&n.adId===a)try{let t=e.document;n.ad&&(t=i(t,{width:n.width,height:n.height}).contentDocument,t.open()),function({ad:e,adUrl:t,width:n,height:r},a,o=document){e||t?(t&&!e?i(o,{width:n,height:r,src:t}):(o.write(e),o.close()),a()):a({reason:s,message:"Missing ad markup or URL"})}(n,g,t)}catch(e){g({reason:r,message:e.message})}}const u=JSON.stringify({message:"Prebid Request",adId:a,options:{clickUrl:d}}),h=new MessageChannel;h.port1.onmessage=l,e.parent.postMessage(u,c,[h.port2]),e.addEventListener("message",l,!1)}}()}();</script>

<script>
    renderAd({
        adId: '%%PATTERN:hb_adid%%',
        pubUrl: '%%PATTERN:url%%',
        clickUrl: '%%CLICK_URL_UNESC%%'
    });
</script>
